<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="cart.css">
</head>
<body>
<div class="a">
    <div class="header">
        <div class="wrapper">
            <div class="header_wrapper">
                <div class="header_logo">
                    <p1><span class="letter">Flower</span>Shope</p1>
                </div>
                
                <nav class="header_nav">
                    <ul class="header_list">
                        <li class="header_item">
                            <a href="index.html" class="header_home">Home</a>
                        </li>
                        <li class="header_item">
                            <a href="shope.html" class="header_shope">Shope</a>
                        </li>
                        <li class="header_item">
                            <a href="bloge.html" class="header_shope">Bloge</a>
                        </li>
                        <li class="header_item">
                            <a href="cart.html" class="header_about">Cart</a>
                        </li>
                    </ul>
                </nav>
                <div class="header__logo">
                    <img src="./images/Vector (5).png" alt="vector" class="logo1">
                    <img src="./images/Vector (6).png" alt="vector" class="logo2">
                </div>
            </div>
        </div>
    </div>
    <div class="main">
        <div class="main_wrapper">
            <div class="section">
                <div class="main_title">
                    <h1>Basket</h1>
                </div>
                <div class="container_mb-5">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="row">
                                <!-- product -->
                                <div class="col-md-6">
                                    <div class="card mb-4" data-id="01">
                                        <img class="product-img" src="./images/Rectangle 58 (6).png" alt="">
                                        <div class="card-body text-center">
                                            <h4 class="item-title">Sun flower</h4>
                                            <div class="details-wrapper">
                                                <div class="items counter-wrapper">
                                                    <div class="items__control" data-action="minus">-</div>
                                                    <div class="items__current" data-counter>1</div>
                                                    <div class="items__control" data-action="plus">+</div>
                                                </div>
                                                <div class="price">
                                                    <div class="price__currency">5$</div>
                                                </div>
                                            </div>
                                            <button data-cart type="button" class="btn btn-block btn-outline-warning">+ в корзину</button>
                                        </div>
                                    </div>
                                </div>
                                <!-- // product -->
            
                                </div>
                        </div>
                        <div class="col-md-4">
                            <!-- Корзина -->
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h2 class="card-title">Ваш заказ</h2>
                                    <div data-cart-empty class="alert alert-secondary" role="alert">
                                        Корзина пустая
                                    </div>
                                    <!-- cart-wrapper -->
                                    <div class="cart-wrapper">
                                        
                                        
                                    </div>
                                    <!-- // cart-wrapper -->
                                    <!-- Стоимость заказа -->
                                    <div class="cart-total">
                                        <p><span class="h5">Доставка:</span> <span class="delivery-cost free">free</span> </p>
                                        </div>
                                    <!-- // Стоимость заказа -->
                                </div>
                                <!-- Оформить заказ -->
                                <div id="order-form" class="card-body border-top none">
                                    <h3 class="card-title">Оформить заказ</h3>
                                    <form>
                                        <div class="form-group">
                                            <input type="text" class="form-control" placeholder="Enter your phone number">
                                        </div>
                                        <button type="submit" class="btn btn-primary">Заказать</button>
                                    </form>
                                </div>
                                <!-- // Оформить заказ -->
                            </div>
                            <!-- // Корзина -->
                        </div>
                    </div>
                </div>
        
        </div>
    </div>
</div>
<footer class="footer">
    <div class="footer_wrapper">
        <div class="footer_block">
            <p23 class="p23"><span class="flower">Flower</span>Shope</p23>
            <p class="p24">Some random stuff about flower shop and some more info cuz this box had to get fill
                Some random stuff about flower shop and some more info cuz this box had to get fill
                Some random stuff about flower shop and some more info cuz this box had to get fill</p>
            
        </div>
        <div class="footer_block2">
            <p class="p25">Links</p>
            <p class="p26">Home</p>
            <p class="p26">Shop</p> 
            <p class="p26">About</p> 
            <p class="p26">Login</p>

        </div>
        <div class="footer_block2">
            <p class="p25">Links</p>
            <p class="p26">Home</p>
            <p class="p26">Shop</p> 
            <p class="p26">About</p> 
            <p class="p26">Login</p>
        </div>
        <div class="footer_block3">
            <p class="p27">Contact</p>
            <div class="add">
                <img src="./images/Vector (10).png" alt="" class="vector10">
                <p class="p28">26985 Brighton Lane, Lake Forest, CA</p>
            </div>
            <div class="add">
                <img src="./images/Star 11.png" alt="" class="vector11">
                <p class="p29">support@Flowers.com</p>
            </div>
            <div class="add">
                <img src="./images/Vector (12).png" alt="" class="vector12">
                <p class="p30">+1 236 5489</p>
            </div>
        </div>
    </div>
</footer>
    <script src="main.js"></script>
</body>
<script>
    function toggleCartStatus(){

const cartWrapper = document.querySelector('.cart-wrapper');
const cartEmptyBadge = document.querySelector('[data-cart-empty]');
const orderForm = document.querySelector('#order-form');


if(cartWrapper.children.length > 0 ){
  console.log("Full")
  cartEmptyBadge.classList.add('none')
  orderForm.classList.remove('none')
}
else{
  console.log("Empty")
  cartEmptyBadge.classList.remove('none');
  orderForm.classList.add('none');
}

}



const cartWrapper = document.querySelector('.cart-wrapper');

window.addEventListener('click', function (event) {


  if (event.target.hasAttribute('data-cart')){


      const card = event.target.closest('.card');
      
      const productInfo = {
          id: card.dataset.id,
          imgSrc: card.querySelector('.product-img').getAttribute('src'),
          title: card.querySelector('.item-title').innerText,
          price: card.querySelector('.price__currency').innerText,
          counter: card.querySelector('[data-counter]').innerText,

      }

      //Проверить есть ли схожий продукт
      
      const itemInCart = cartWrapper.querySelector(`[data-id="${productInfo.id}"]`);

      //Если есть то выполнять следующее действие
      if (itemInCart){
          const counterElement = itemInCart.querySelector('[data-counter]');
          counterElement.innerText = parseInt(counterElement.innerText) + parseInt(productInfo.counter);
      }
      else{

      


              const cartItemHTML = `<div class="cart-item" data-id="${productInfo.id}">
              <div class="cart-item__top">
                  <div class="cart-item__img">
                      <img src="${productInfo.imgSrc}" alt="">
                  </div>
                  <div class="cart-item__desc">
                      <div class="cart-item__title">${productInfo.title}</div>
                      <!-- cart-item__details -->
                      <div class="cart-item__details">
                          <div class="items items--small counter-wrapper">
                              <div class="items__control" data-action="minus">-</div>
                              <div class="items__current" data-counter="">${productInfo.counter}</div>
                              <div class="items__control" data-action="plus">+</div>
                          </div>
                          <div class="price">
                              <div class="price__currency">${productInfo.price}</div>
                          </div>
                      </div>
                      <!-- // cart-item__details -->
                  </div>
              </div>
          </div>`;

          
          

          cartWrapper.insertAdjacentHTML('beforeend', cartItemHTML)

      }
      toggleCartStatus()
      total()


  }
})
</script>
</html>